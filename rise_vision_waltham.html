<!DOCTYPE html>
<html>
<head lang="en">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <title></title>
    <style>
        html, body { 
            height: 100%; 
            margin: 0;
            overflow-y: hidden;
            overflow-x: hidden;
        }
        body {
            background-color: #6d9eebff;
            padding: 2%;
        }
        .all {
            height: 100%;  
            margin: 0; 
        }
        .logo {
            width: 40%;
        }
        .header_container {
        }
        .header {
            color: #073763;
            font-size: 130px;
        }
        .image {
            display: inline-block;
            width: 20%;
            vertical-align: top;
        }
        .title {
            display: inline-block;
            width: 59%;
            text-align: center;
            vertical-align: top;
        }
        .clock {
            display: inline-block;
            width: 20%;
            text-align: right;
            vertical-align: top;
        }
        .main {
           margin: auto;
           width: 100%;
           padding-top: 2%;
           height: 57%;
           overflow: hidden;
        }
        .table_one {
            background-color: white;
            padding: 2%;
            border: 2px solid #073763;
            display: inline-block;
            width: 42%;
            height: 85%;
            vertical-align: top;
            margin: .5%;
        }
        .table_two {
            background-color: white;
            padding: 2%;
            border: 2px solid #073763;
            display: inline-block;
            width: 42%;
            height: 85%;
            vertical-align: top;
            margin: .5%;
            float: right;
        }
        #schedule {
            vertical-align: top;
            width: 100%;
        }
        #announcements {
            vertical-align: top;
            width: 100%;
            min-height: 50%;
        }
        th {
            color: #073763;
            font-size: 40px;
            padding-bottom: 2%;
            text-align: center;
            border-bottom: 2px solid #073763;
            min-width: 100%;
        }
        td {
            font-size: 30px;
            color: #073763;
            max-height: 2em;
        }
        thead > tr {
            width: 100%;
        }
        .navigation {
            margin: auto;
            height: 10%;
            overflow: hidden;
        }
        .leftArrow {
            float: left;
            color: white;
            font-size: 50px;
            top: 0;
        }
        .rightArrow {
            float: right;
            color: white;
            font-size: 50px;
            top: 0;
        }
        .footer {
            bottom: 0;
            position: fixed;
            left: 0;
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="all">
    <div class="header_container">
        <div class="image">
            <img class="logo" src="http://i.imgur.com/xrAAez9.png">
        </div>
        <div class="title">
            <div class="header">The Carroll School</div>
        </div>
        <div class="clock">
            <div class="cleanslate w24tz-current-time w24tz-middle"><p><a href="//24timezones.com/usa_time/ma_middlesex/waltham.php" 
            style="text-decoration: none" class="clock24" 
            id="tz24-1542631123-cu126229-eyJob3VydHlwZSI6IjEyIiwic2hvd2RhdGUiOiIxIiwic2hvd3NlY29uZHMiOiIwIiwiY29udGFpbmVyX2lkIjoiY2xvY2tfYmxvY2tfY2I1YmYyYWVkMzg2OTU1IiwidHlwZSI6ImRiIiwibGFuZyI6ImVuIn0=" 
            title="timezone - Waltham" target="_blank" rel="nofollow">Current time in Waltham</a></p><div id="clock_block_cb5bf2aed386955"></div></div>
            <script type="text/javascript" src="//w.24timezones.com/l.js" async></script>
        </div> 
    </div>
    <div class="main">
        <div class="table_one">
        <table id="schedule">
            <thead>
                <tr>
                    <th colspan="2">Daily School Schedule</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
        </div>
        <div class="table_two">
        <table id="announcements">
            <thead>
                <tr>
                    <th colspan="2">Announcements</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
        </div>
    </div>
    <div class="navigation">
        <p class="leftArrow">← Rooms 101 - 121</p>
        <p class="rightArrow">Rooms 120 - 147 →</p>
    </div>
    <div class="footer">
        <a class="weatherwidget-io" href="https://forecast7.com/en/42d38n71d24/waltham/?unit=us" data-label_1="Waltham, MA" data-label_2="WEATHER" 
        data-theme="original" >Waltham, MA WEATHER</a>
        <script>
        !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);
        js.id=id;js.src='https://weatherwidget.io/js/widget.min.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','weatherwidget-io-js');
        </script>
    </div>
    </div>
    <script>
        function getSchedule() {
            var monThur = [["7:45 - 8:10","SPARK"],["8:15 - 8:35","RC Morning Block"],["8:35 - 9:28","A Block"],["9:28 - 10:20","B Block"],
            ["10:20 - 10:50","Snack/Recess"],["10:50 - 11:43","C Block"],["11:43 - 12:35","D Block"],["12:35 - 1:15","Lunch/Recess"],
            ["1:15 - 2:08","E Block"],["2:08 - 3:00","F Block"],["3:00 - 3:10","NCLU/HRs - go to dismissal"],["3:15","Dismissal Begins"]]; 
            var fri = [["7:45 - 8:10","SPARK"],["8:15 - 8:30","RC Morning Block"],["8:30 - 9:14","A Block"],["9:14 - 9:58","B Block"],
            ["9:58 - 10:23","Snack/Recess"],["10:23 - 11:05","C Block"],["11:05 - 11:49","D Block"],["11:49 - 12:10","HRs or THs - go to dismissal"],
            ["12:15","Dismissal Begins"]];
            var override = false;
            var day;
            var table = document.getElementById('schedule').getElementsByTagName('tbody')[0];
            var date = new Date();
            if(override) {
                day = fri;
            } else if(date.getDay() != 5) {
                day = monThur;
            } else {
                day = fri;
            }
            for(i = 0; i < day.length; i++) {
                var row = table.insertRow(i);
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);

                cell1.innerHTML = day[i][0];
                cell2.innerHTML = day[i][1];
                cell1.style.width = "40%";
            }
            
        }
        window.onload = getSchedule;
    </script>
    <script>
        function setupWeek(messageList) {
            var table = document.getElementById('announcements').getElementsByTagName('tbody')[0];
            for(i = 0; i < 5; i++) {
                var row = table.insertRow(i);
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                var elements = messageList[i][0].split(" ");
                var elementOne = elements[0];
                var elementTwo = "";
                for(j = 1; j < elements.length; j++) {
                    elementTwo +=  elements[j] + " ";
                }
                cell1.innerHTML = elementOne + "<br>" + elementTwo
                cell2.innerHTML = messageList[i][1];
                cell1.style.width = "40%";
                cell2.style.height = "2.5em";
            }
        }
        
        var messageList = [];
        
        const onDataLoaded = (data) => {
            for(i = 0; i < 5; i++) {
                var varOne = 'A' + (i+1);
                var varTwo = 'B' + (i+1);
                
                var itemOne = " ";  
                var itemTwo = " ";  
                
                try {
                    itemOne = data.feed.entry.find((entry) => entry.title.$t == varOne).content.$t;
                } catch (e) {
                }
                try {
                    itemTwo = data.feed.entry.find((entry) => entry.title.$t == varTwo).content.$t;
                } catch(e) {
                }
                messageList.push([itemOne,itemTwo]);
                
            }
            setupWeek(messageList);
        }
    </script>
    <script src="https://spreadsheets.google.com/feeds/cells/17j7Mz4ljmyjayxGt28PGftgE79yjRvV5WrH8TQsnRc0/1/public/basic?alt=json-in-script&callback=onDataLoaded"></script>
</body>
</html>
